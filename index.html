<html>
<style>

#board {
	display: block;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

.piece {

}

.piece-background {
	fill: #ddd;
}

.piece-path {
	stroke-width:.05px;
	stroke: #000;
	fill: #aaa;
}
</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

var pieces = [
	{r:-2, q:0, type:0, offset:0},
	{r:-2, q:1, type:5, offset:3},
	{r:-2, q:2, type:2, offset:3},
	{r:-1, q:-1, type:1, offset:1},
	{r:-1, q:0, type:7, offset:1},
	{r:-1, q:1, type:0, offset:2},
	{r:-1, q:2, type:6, offset:4},
	{r:0, q:-2, type:0, offset:1},
	{r:0, q:-1, type:9, offset:2},
	{r:0, q:0, type:11, offset:0},
	{r:0, q:1, type:10, offset:0},
	{r:0, q:2, type:4, offset:-2},
	{r:1, q:-2, type:8, offset:1},
	{r:1, q:-1, type:12, offset:0},
	{r:1, q:0, type:7, offset:1},
	{r:1, q:1, type:3, offset:-1},
	{r:2, q:-2, type:1, offset:-1},
	{r:2, q:-1, type:2, offset:0},
	{r:2, q:0, type:4, offset:-1},
];
var width = 11,
	height = 10;
var board = d3.select("body")
	.append("svg")
	.attr("id", "board")
	.attr("viewBox", "" + (-width/2) + "," + (-height/2) + "," + width + "," + height);
//	.attr("preserveAspectRatio", "xMidYMid meet");
board.selectAll(".piece")
	.data(pieces)
	.enter()
	.append("g")
	.classed("piece", true)
	.each(createPiece);

function createPiece(d)
{
	var piece = d3.select(this)
		.attr("transform", "translate("+p2cstring(2*d.q, 0, 2*d.r, -60)+")")
		.append("g")
		.attr("transform", "rotate("+(d.offset*60)+")")
		.on("click", rotate)
		.on("touchend", rotate);
	piece.append("circle")
		.classed("piece-background", true)
		.attr("cx", "0")
		.attr("cy", "0")
		.attr("r", "1");
	var path = piece.append("path")
		.classed("piece-path", true);
	switch (d.type)
	{
	case 0: // 6
		path.attr("d", "M"+p2cstring(0,0,1,0) + " L "+p2cstring(0,0,.2,0)+" A .2,.2 0 1 1"+p2cstring(0,0,.2,1));
		break;
	case 1: // 1 5
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 2: // 2 4
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 3: // 3 3
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,180)  + " Q 0,0"+p2cstring(0,0,1,00));
		break;
	case 4: // 1 1 4
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 5: // 1 2 3
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,180) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 6: // 1 3 2
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,180) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 7: // 2 2 2
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,240) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 8: // 1 1 1 3
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,180) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 9: // 1 1 2 2
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,240) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 10: // 1 2 1 2
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,180) + " Q 0,0"+p2cstring(0,0,1,240) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 11: // 1 1 1 1 2
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,180) + " Q 0,0"+p2cstring(0,0,1,240) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	case 12: // 1 1 1 1 1 1
		path.attr("d", "M"+p2cstring(0,0,1,0) + " Q 0,0"+p2cstring(0,0,1,60) + " Q 0,0"+p2cstring(0,0,1,120) + " Q 0,0"+p2cstring(0,0,1,180) + " Q 0,0"+p2cstring(0,0,1,240) + " Q 0,0"+p2cstring(0,0,1,300) + " Q 0,0"+p2cstring(0,0,1,0));
		break;
	}
}

function rotate(d)
{
	if (d3.event.shiftKey)
		d.offset = (d.offset-1)%6;
	else
		d.offset = (d.offset+1)%6;
	d3.select(this)
		.transition()
		.attr("transform", "rotate("+(d.offset*60)+")")
		.duration(250);
	d3.event.preventDefault();
}

// Convert polar coordinates to Cartesian
function p2c(cx, cy, r, deg)
{
	var rad = deg * Math.PI / 180.0;
	return { x: cx + (r * Math.cos(rad)), y: cy - (r * Math.sin(rad)) };
}

function p2cstring(cx, cy, r, deg)
{
	coord = p2c(cx, cy, r, deg);
	return " " + coord.x + "," + coord.y;
}

</script>

</body>
</html>